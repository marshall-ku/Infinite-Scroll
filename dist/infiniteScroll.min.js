/*
Infinite Scroll v 1.0.4 - minified
https://github.com/marshall-ku/Infinite-Scroll
Released under the MIT License.
by Marshall K
*/

function infiniteScroll({container:e,next:t,prev:r,item:n,nextButton:l,prevButton:o,nextLoader:s,prevLoader:c,pushHistory:i,detectLoad:u,onLoadFinish:a,nextCallback:d,prevCallback:h,autoPrev:y}){const f=window.innerHeight,p=document.querySelector(e),S=document.querySelector(t),m=document.querySelector(r),q={next:s&&document.querySelector(s),prev:c&&document.querySelector(c)},v=[],g="reveal";let L=!1,w=!1,A=window.scrollY||window.pageYOffset,E=!1;function x(){S.classList.add("done"),S.removeAttribute("href"),s&&(q.next.style.display="none"),l&&(l.style.display="none")}function b(){m.classList.add("done"),m.removeAttribute("href"),c&&(q.prev.style.display="none"),o&&(o.style.display="none")}function k(){const e=document.querySelector(t);if(null===e||!0===L||e.classList.contains("done"))return;let r=0,o=0;const c=e.href;L=!0,s&&q.next.classList.add(g),l&&(l.style.display="none"),fetch(c).then(e=>{const t=e.status;if(200===t)return e.text();404===t&&x()}).then(h=>{const y=(new DOMParser).parseFromString(h,"text/html"),f=y.querySelectorAll(n);null===y.querySelector(t)?x():""===y.querySelector(t).getAttribute("href")?x():e.href=y.querySelector(t).href,u?[...f].forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{r++,e.onload=(()=>{r===++o&&(i&&history.pushState(null,null,c),s&&q.next.classList.remove(g),l&&!S.classList.contains("done")&&(l.style.display=""),L=!1,a&&a())})}),p.append(e),d&&d(e)}):([...f].forEach(e=>{p.append(e),i&&history.pushState(null,null,c),d&&d(e)}),L=!1,s&&q.next.classList.remove(g),l&&(l.style.display=""))}).catch(e=>{console.log(e)})}function F(){const e=document.querySelector(r);if(null===e||!0===w||e.classList.contains("done"))return;let t=!1,l=0,s=0;const d=e.href,f=()=>{l===s&&(c&&q.prev.classList.remove(g),w=!1,o&&!m.classList.contains("done")&&(o.style.display=""),a&&a())};w=!0,c&&q.prev.classList.add(g),o&&(o.style.display="none"),fetch(d).then(e=>{const r=e.status;return 200===r?e.text():404===r&&(t=!0,b(),!1)}).then(o=>{const a=(new DOMParser).parseFromString(o,"text/html"),S=a.querySelectorAll(n);t=y&&(!!t||(null===a.querySelector(r)||""===a.querySelector(r).getAttribute("href"))),null===a.querySelector(r)?b():""===a.querySelector(r).getAttribute("href")?b():e.href=a.querySelector(r).href,y?(t?b():e.href=a.querySelector(r).href,[...a.querySelectorAll(n)].reverse().forEach(e=>{v.push(e)}),t?u?v.forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{l++,e.onload=(()=>{s++,f()})}),p.prepend(e),h&&h(e)}):v.forEach(e=>{p.prepend(e),h&&h(e)}):(w=!1,F())):u?[...S].reverse().forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{l++,e.onload=(()=>{s++,f()})}),p.prepend(e),h&&h(e)}):([...S].reverse().forEach(e=>{p.prepend(e),i&&history.pushState(null,null,d),h&&h(e)}),w=!1,c&&q.prev.classList.remove(g))}).catch(e=>{console.log(e)})}function O(){const e=p.offsetTop;!l&&null!==S&&""!==S.getAttribute("href")&&!L&&A>=e+p.scrollHeight-f-500&&k(),!o&&null!==m&&""!==m.getAttribute("href")&&!w&&A<=e+500&&F()}(function(){if(!e||!t||!n)throw"Initial Elements are Missing!";l&&(l=document.querySelector(l)),o&&(o=document.querySelector(o)),null===S?x():""===S.getAttribute("href")&&x(),null===m?b():""===m.getAttribute("href")&&b(),void 0===u&&(u=!0)})(),!o&&y&&F(),O(),window.addEventListener("scroll",()=>{E||(window.requestAnimationFrame(()=>{A=window.scrollY||window.pageYOffset,O(),E=!1}),E=!0)}),l&&l.addEventListener("click",()=>{k()}),o&&o.addEventListener("click",()=>{F()})}
