/*
Infinite Scroll v 1.0.3 - minified
https://github.com/marshall-ku/Infinite-Scroll
Released under the MIT License.
by Marshall K
*/

function infiniteScroll({container:e,next:t,prev:r,item:n,nextButton:l,prevButton:o,nextLoader:c,prevLoader:s,pushHistory:u,detectLoad:i,onLoadFinish:a,nextCallback:d,prevCallback:h,autoPrev:f}){const y=window.innerHeight,p=document.querySelector(e),S=document.querySelector(t),m=document.querySelector(r),q={next:c&&document.querySelector(c),prev:s&&document.querySelector(s)},v=[],g="reveal";let w=!1,L=!1,A=window.scrollY||window.pageYOffset,E=!1;function x(){S.classList.add("done"),S.removeAttribute("href"),c&&(q.next.style.display="none"),l&&(l.style.display="none")}function b(){m.classList.add("done"),m.removeAttribute("href"),s&&(q.prev.style.display="none"),o&&(o.style.display="none")}function k(){const e=document.querySelector(t);if(null===e||!0===w||e.classList.contains("done"))return;let r=0,o=0;const s=e.href;w=!0,c&&q.next.classList.add(g),l&&(l.style.display="none"),fetch(s).then(e=>{const t=e.status;if(200===t)return e.text();404===t&&x()}).then(h=>{const f=(new DOMParser).parseFromString(h,"text/html"),y=f.querySelectorAll(n);null===f.querySelector(t)?x():""===f.querySelector(t).getAttribute("href")?x():e.href=f.querySelector(t).href,i?[...y].forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{r++,e.onload=(()=>{r===++o&&(u&&history.pushState(null,null,s),c&&q.next.classList.remove(g),l&&(l.style.display=""),w=!1,a&&a())})}),p.append(e),d&&d(e)}):([...y].forEach(e=>{p.append(e),u&&history.pushState(null,null,s),d&&d(e)}),w=!1,c&&q.next.classList.remove(g),l&&(l.style.display=""))}).catch(e=>{console.log(e)})}function F(){const e=document.querySelector(r);if(null===e||!0===L||e.classList.contains("done"))return;let t=!1,l=0,o=0;const c=e.href,d=()=>{l===o&&(s&&q.prev.classList.remove(g),L=!1,a&&a())};L=!0,s&&q.prev.classList.add(g),fetch(c).then(e=>{const r=e.status;return 200===r?e.text():404===r&&(t=!0,b(),!1)}).then(a=>{const y=(new DOMParser).parseFromString(a,"text/html"),S=y.querySelectorAll(n);t=f&&(!!t||(null===y.querySelector(r)||""===y.querySelector(r).getAttribute("href"))),null===y.querySelector(r)?b():""===y.querySelector(r).getAttribute("href")?b():e.href=y.querySelector(r).href,f?(t?b():e.href=y.querySelector(r).href,[...y.querySelectorAll(n)].reverse().forEach(e=>{v.push(e)}),t?i?v.forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{l++,e.onload=(()=>{o++,d()})}),p.prepend(e),h&&h(e)}):v.forEach(e=>{p.prepend(e),h&&h(e)}):(L=!1,F())):i?[...S].reverse().forEach(e=>{e.querySelector("img")&&[...e.querySelectorAll("img")].forEach(e=>{l++,e.onload=(()=>{o++,d()})}),p.prepend(e),h&&h(e)}):([...S].reverse().forEach(e=>{p.prepend(e),u&&history.pushState(null,null,c),h&&h(e)}),L=!1,s&&q.prev.classList.remove(g))}).catch(e=>{console.log(e)})}function O(){const e=p.offsetTop;!l&&null!==S&&""!==S.getAttribute("href")&&!w&&A>=e+p.scrollHeight-y-500&&k(),!o&&null!==m&&""!==m.getAttribute("href")&&!L&&A<=e+500&&F()}(function(){if(!e||!t||!n)throw"Initial Elements are Missing!";l&&(l=document.querySelector(l)),o&&(o=document.querySelector(o)),null===S?x():""===S.getAttribute("href")&&x(),null===m?b():""===m.getAttribute("href")&&b(),void 0===i&&(i=!0)})(),!o&&f&&F(),O(),window.addEventListener("scroll",()=>{E||(window.requestAnimationFrame(()=>{A=window.scrollY||window.pageYOffset,O(),E=!1}),E=!0)}),l&&l.addEventListener("click",()=>{k()}),o&&o.addEventListener("click",()=>{F()})}
